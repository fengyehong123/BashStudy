#!/usr/bin/env bash

# ---------------------------------------------------------------------------------------------------
# â¹å…³è”æ•°ç»„
# ä» Bash 4.0 å¼€å§‹ï¼ŒBash æ”¯æŒå…³è”æ•°ç»„ã€‚
# å…³è”æ•°ç»„å…è®¸ä½ å°†é”®å’Œå€¼é…å¯¹ï¼Œå¹¶é€šè¿‡é”®æ¥è®¿é—®å€¼ï¼Œç±»ä¼¼äºå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­çš„ Mapã€‚
#
# â¹åˆ›å»ºå…³è”æ•°ç»„
# declare -A å…³è”æ•°ç»„åç§°      
# ---------------------------------------------------------------------------------------------------

# --------------------------
# ğŸ”´åˆ›å»ºä¸€ä¸ªå…³è”æ•°ç»„
# --------------------------
declare -A personMap=(
    [name]="è´¾é£å¤©"
    [age]=18
    [address]='åœ°çƒ'
)

# â¹æ ¹æ®keyè®¿é—®å¯¹åº”çš„value
echo "${personMap["name"]}"  # è´¾é£å¤©

# keyä¹Ÿå¯ä»¥æ˜¯ä¸ªå˜é‡
mykey="age"
echo "${personMap[$mykey]}"  # 18

# --------------------------
# ğŸ”´å…ƒç´ çš„æ·»åŠ 
# --------------------------
personMap["car"]="çº¢æ——"
echo "${personMap["car"]}"  # çº¢æ——

# è·å–æ‰€æœ‰çš„key
echo "${!personMap[@]}"  # address age car name

# --------------------------
# ğŸ”´å…ƒç´ çš„åˆ é™¤
# --------------------------
# åˆ é™¤æŒ‡å®šçš„key
unset "personMap['car']"

# å…ƒç´ åˆ é™¤åï¼Œè·å–æ‰€æœ‰çš„key
echo "${!personMap[@]}"  # address age name

echo -e "\e[1;31m/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_åˆ†å‰²çº¿_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_\e[0m"

# --------------------------
# ğŸ”´å…ƒç´ é”®å€¼å¯¹çš„è·å–ä¸éå†
# --------------------------
# éå†é”®
echo "${!personMap[@]}" | xargs -n 1
# address
# age
# name

# éå†å€¼
echo "${personMap[@]}" | xargs -n 1
# åœ°çƒ
# 18
# è´¾é£å¤©

# --------------------------
# ğŸ”´éå†æ•´ä¸ªå…³è”æ•°ç»„
# --------------------------
for key in "${!personMap[@]}"; do
    echo "$key: ${personMap[$key]}"
done
# address: åœ°çƒ
# age: 18
# name: è´¾é£å¤©

# --------------------------
# ğŸ”´å®é™…åº”ç”¨
# --------------------------

# å°†ç³»ç»Ÿä¿¡æ¯æ”¶é›†åˆ°å…³è”æ•°ç»„ä¸­
declare -A sysinfo=(
    [hostname]=$(hostname)
    [os]=$(uname -o)
    [kernel]=$(uname -r)
)

# è¾“å‡ºç³»ç»Ÿä¿¡æ¯
for key in "${!sysinfo[@]}"; do
    echo "$key: ${sysinfo[$key]}"
done

# hostname: MingWei-HP
# kernel: 3.4.10-87d57229.x86_64
# os: MingWei-HP